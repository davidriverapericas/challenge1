function LiveSeach(t,e,s,n,i){this.elementId=t,this.apiurl=e||null,this.minTypedLength=s||2,this.xmlhttp=null,this.input=null,this.resultsWrapperContainer=null,this.resultsContainer=null,this.userDefinedFormatFunction="function"==typeof n?n:null,this.userDefinedSelectedFunction="function"==typeof i?i:null,(this._this=this).init=function(){(this.input=document.getElementById(this.elementId))?"INPUT"===this.input.nodeName.toUpperCase()?"TEXT"===this.input.type.toUpperCase()?null!==e&&0!=e.length?(this.input.classList.add("livesearch"),(this.input._parentobj=this).eventWrapper(this.input,"input",this.eventInputChanged),this.eventWrapper(this.input,"blur",this.eventInputBlur),this.resultsWrapperContainer=document.createElement("div"),this.resultsWrapperContainer.className="livesearchWrapper",this.resultsWrapperContainer.id="livesearchWrapper"+this.elementId,this.resultsContainer=document.createElement("div"),this.resultsContainer.className="livesearchResContainer",this.resultsWrapperContainer.appendChild(this.resultsContainer),this.input.after(this.resultsWrapperContainer)):error("APIURL parameter not defined properly"):error("ElementId '"+this.elementId+"' is not an input[type='text'] field"):error("ElementId '"+this.elementId+"' is not an input field"):error("ElementId '"+this.elementId+"' not found in DOM")},this.eventWrapper=function(t,e,s){try{t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,s)}catch(t){this.error(t.message)}},this.requestDataFromURL=function(t){this.xmlhttp&&this.xmlhttp.abort(),this.xmlhttp=new XMLHttpRequest;var e=this;this.xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){try{var t=JSON.parse(this.responseText);e.displayResults(t)}catch(t){e.error("Error parsing the JSON response: "+t.message)}e.xmlhttp=null,e.input.classList.remove("loading")}else 4==this.readyState&&200!=this.status&&(e.error("Error on the AJAX request"),e.xmlhttp=null,e.input.classList.remove("loading"))};try{this.xmlhttp.open("GET",this.apiurl+t,!0),this.xmlhttp.send()}catch(t){this.error("Error on the XHR request: "+t.message)}},this.formatResult=function(t){var e=this.input.value;if("string"==typeof t)return this.boldResult(t,e);if(this.userDefinedFormatFunction){var s=this.userDefinedFormatFunction(t);return this.boldResult(s,e)}if("object"==typeof t){var n,i="";for(n in t)i+=""!=i?" ":"",i+="<strong>"+n+"</strong>: "+t[n];return this.boldResult(i,e)}},this.boldResult=function(t,e){return t.replace(new RegExp("(^|)("+e+")(|$)","ig"),"$1<strong>$2</strong>$3")},this.displayResults=function(t){if(this.resultsContainer.innerHTML="",$noresultsfound=!0,0<Object.keys(t).length)for(var e in $noresultsfound=!1,t){var s,n;t.hasOwnProperty(e)&&(s=t[e],(n=document.createElement("div")).innerHTML=this.formatResult(s),n.className="livesearchRes",(n._parentobj=this).resultsContainer.appendChild(n),this.eventWrapper(n,"mousedown",this.clickResult))}var i;$noresultsfound&&((i=document.createElement("div")).innerHTML=" - 0 results found - ",i.className="livesearchRes",this.resultsContainer.appendChild(i)),this.resultsWrapperContainer.classList.add("displayresults")},this.log=function(t){console.log("UIKIT LOG :: "+t)},this.error=function(t){console.error("UIKIT Error :: "+t)},this.eventInputChanged=function(t){this.value.length>=s?(this.classList.add("loading"),this._parentobj.requestDataFromURL(this.value)):(this.classList.remove("loading"),this._parentobj.resultsWrapperContainer.classList.remove("displayresults"))},this.eventInputBlur=function(t){this.classList.remove("loading"),this._parentobj.resultsWrapperContainer.classList.remove("displayresults")},this.clickResult=function(t){var e=document.createElement("div");e.innerHTML=this.innerHTML;e=e.textContent||e.innerText||"";this._parentobj.input.value=e,i&&i(e)},this.init()}